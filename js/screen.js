var ChoseEditType,ChoseTag,Done,ExportCards,Home,ImportCards,Ready,RegisterCardsByHand,RegisterCardsByWords,Saving,Screen,Speech,TestAnswer,TestCards,TestQuestion,TestResult;Speech=function(){function e(e){return null}return e}(),Screen=function(){function e(){}var n,r;return n="Ready",r=0,e.prototype.transition=function(e){var r,a;return r=function(e){var n;switch(n=null,e){case"Ready":n=$("#ready");break;case"Done":n=$("#done");break;case"Settings":n=$("#settings");break;case"Error":n=$("#error");break;case"Success":n=$("#success");break;case"Loading":n=$("#loading");break;case"Saving":n=$("#saving");break;case"home":n=$("#home");break;case"edit":n=$("#chose-edit-type");break;case"ChoseTag":n=$("#chose-tag");break;case"ChoseTagSaving":n=$("#chose-tag-saving");break;case"ApplyTag":n=$("#apply-tag");break;case"Loading":n=$("#chose-edit-type");break;case"TestResult":n=$("#test-result");break;case"TestLearned":n=$("#test-learned");break;case"TestNotfound":n=$("#test-notfound");break;case"TestQuestion":n=$("#test-question");break;case"TestAnswer":n=$("#test-answer");break;case"RegisterCardsByHand":n=$("#add-cards-manually");break;case"RegisterCardsByWords":n=$("#add-card-from-text");break;case"RegisterCardsByWordsInput":n=$("#register-cards-by-words-create");break;case"RegisterCardsByWordsNotfound":n=$("#register-cards-by-words-notfound");break;case"ImportCards":n=$("#cards-import");break;case"ImportError":n=$("#cards-import-error");break;case"ImportFinished":n=$("#cards-import-finished");break;case"ExportCards":n=$("#cards-export")}return n},(a=function(e){var a,t;return a=r(n),t=r(e),null!=a&&null!=t?(a.hide(),t.fadeIn(),n=e):void 0})(e)},e}(),Ready=function(){function e(){var e,a,t,s,o,p,u,l,c;u=function(){return null},p=function(e){return e.preventDefault()},app.key.load(s={sticky:!0,keys:{ctrl_r:p}}),t=function(){var e;return e=new Strage,e.load(function(e){var n;return n=new Cards,e.length>0?(n.create(e),app.cards=n):app.cards="not found",setTimeout(function(){return app.se.play("ok")},0),app.screen.transition("home"),new Home}),null},e=function(){var e;return n.strage="DropBox",n.message="DropBox\u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002","pending"===app.cards?(e="6j70j9g5obmkmpq",app.strage="Dropbox",setTimeout(function(){return app.client=new Dropbox.Client({key:e}),app.client.authenticate(function(e){return null!=e?(n.message="\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u307e\u3057\u305f",n.status="\u3082\u3046\u4e00\u5ea6\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002",app.strage="localStrage",null):(app.strage="DropBox",t())})},1e3)):void 0},o=function(){return app.se.play("ok"),app.cards="not found",app.screen.transition("home"),new Home,null},a=function(){var n;return localStorage.getItem("tagname")&&(app.tagname=localStorage.getItem("tagname")),n=localStorage.getItem("strage"),"DropBox"===n&&e(),null},$("#dropbox").click(function(){return e()}),$("#offline").click(function(){return o()}),app.status={message:"\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u9078\u629e"},c={el:"#status",data:{status:app.status}},new Vue(c),l={el:"#ready",data:{summary:n}},r=new Vue(l),a()}var n,r;return r=null,n={message:"\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",status:"\u7d9a\u3051\u308b\u306b\u306f\u3001\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u9078\u629e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"},e}(),ChoseTag=function(){function e(){var e,a,t,s,o,p;a=function(){var e,a;return app.status.message="\u30bf\u30b0\u3092\u5909\u66f4\u3057\u307e\u3057\u305f",a={el:"#apply-tag",data:{tag:n}},r=new Vue(a),localStorage.setItem("tagname",app.tagname),app.se.play("ok"),app.screen.transition("ApplyTag"),app.key.load(e={keys:{l:t}}),null},e=function(){var e,t,s;return n.from=app.tagname,n.to=n.name,s={el:"#chose-tag-saving",data:{tag:n}},r=new Vue(s),app.se.play("click"),app.screen.transition("ChoseTagSaving"),t=new Strage,"localStrage"!==app.cards&&"not found"!==app.cards&&(e=app.cards.getAll(),t.save(e,function(e){return null!=e?(app.screen.transition("Error"),s={el:"#error",data:{message:res}},r=new Vue(s),null):void 0})),app.tagname=n.name,"localStrage"!==app.cards&&"not found"!==app.cards?t.load(function(n){return e=new Cards,n.length>0?(e.create(n),app.cards=e):app.cards="not found",a()}):a(),null},t=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},o=function(){return app.status.message="\u30bf\u30b0\u3092\u5909\u66f4",n.name=app.tagname,setTimeout(function(){return null!==window.ontouchstart?$("#chose-tag-input").focus():void 0},null),null},null==r&&(p={el:"#chose-tag",data:{tag:n}},r=new Vue(p)),app.key.load(s={keys:{h:t,l:e},input:["#chose-tag-input"]}),o()}var n,r;return r=null,n={name:""},e}(),Home=function(){function e(){var e,a,t,s,o,p,u,l,c;localStorage.setItem("strage",app.strage),u=function(e){var n,r,a,t,s;return n=e/1e3,s=Math.round(n%60),a=Math.floor(n/60%60),r=Math.floor(n/3600%60),t="",r>0&&(t+=""+r+"\u6642\u9593"),a>0&&(t+=""+a+"\u5206"),t+=""+s+"\u79d2"},o=function(e){var n,r,a;return n=1e3,a=["0","1d","1w","4w","999w"],0>e&&(e=0),e>a.length-1&&(e=a.length-1),a[e].match(/m|h|d|w/g)&&(n*=60),a[e].match(/h|d|w/g)&&(n*=60),a[e].match(/d|w/g)&&(n*=24),a[e].match(/w/g)&&(n*=7),r=parseInt(a[e].replace(/[^\d]/g,"")),r*n},s=function(e,n){var r,a,t,s,o,p,u,l,c,i;p=null,s=0,o=[];for(u in e)s+=1,"cards"!==u&&(p=u);if(void 0===e.cards)return null;for(i=e.cards,t=l=0,c=i.length;c>l;t=++l){if(r=i[t],2===s&&r[p]===e[p])return t;null!=n&&(a=n(r),o.push(null!==a?a:null))}return 0===o.length?null:o},c=function(){return app.se.play("click"),new TestCards,null},a=function(){return app.se.play("click"),app.screen.transition("edit"),new ChoseEditType,null},t=function(){var e,n,r,a,t,p,l,c,i,d,f;if(r=function(e){var n,r,a;return a=e.score,n=e.date,r=o(a),+new Date-n>r?e:null},"not found"===app.cards)return app.screen.transition("TestNotfound"),app.key.load(t={keys:{h:go_back}}),null;for(app.cards.first(),p=0,e=app.cards.getAll(),c=0,d=e.length;d>c;c++)n=e[c],p+=n.period;for(e=s({cards:e},r),a=0,i=0,f=e.length;f>i;i++)n=e[i],null!=n&&(a+=1);return l={learned:e.length-a,period:u(p)}},e=function(){return app.se.play("click"),app.screen.transition("ChoseTag"),new ChoseTag,null},l=function(){var e,a,s,o,p;return app.period=0,"not found"===app.cards?(a=0,e=0,o=0):(s=t(),a=app.cards.getLen(),e=s.learned,o=s.period),n.strage=app.strage,n.tagname=app.tagname,n.cards=a,n.learned=e,n.period=o,null==r&&(p={el:"#home",data:{summary:n}},r=new Vue(p)),app.status.message="\u3088\u3046\u3053\u305d"},l(),app.key.load(p={keys:{h:a,j:e,k:e,l:c}})}var n,r;return r=null,n={period:0,cards:0,learned:0,strage:""},e}(),ChoseEditType=function(){function e(){var e,r,a,t,s,o;o=function(){return app.se.play("blow"),$("#chose-edit-type-c"+n).hide(),n-=1,1>n&&(n=4),$("#chose-edit-type-c"+n).show()},r=function(){return app.se.play("blow"),$("#chose-edit-type-c"+n).hide(),n+=1,n>4&&(n=1),$("#chose-edit-type-c"+n).show(),null},s=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},e=function(){return null===window.ontouchstart?($("#btn-import").off("touchstart").on("touchstart",function(){return app.se.play("click"),new ImportCards,app.screen.transition("ImportCards")}),$("#btn-export").off("touchstart").on("touchstart",function(){return app.se.play("click"),app.screen.transition("ExportCards"),new ExportCards}),$("#btn-bywords").off("touchstart").on("touchstart",function(){return app.se.play("click"),app.screen.transition("RegisterCardsByWords"),new RegisterCardsByWords}),$("#btn-byhand").off("touchstart").on("touchstart",function(){return app.se.play("click"),app.screen.transition("RegisterCardsByHand"),new RegisterCardsByHand})):($("#btn-import").off("mousedown").on("mousedown",function(){return app.se.play("click"),app.screen.transition("ImportCards"),new ImportCards}),$("#btn-export").off("mousedown").on("mousedown",function(){return app.se.play("click"),app.screen.transition("ExportCards"),new ExportCards}),$("#btn-bywords").off("mousedown").on("mousedown",function(){return app.se.play("click"),app.screen.transition("RegisterCardsByWords"),new RegisterCardsByWords}),$("#btn-byhand").off("mousedown").on("mousedown",function(){return app.se.play("click"),app.screen.transition("RegisterCardsByHand"),new RegisterCardsByHand})),null},a=function(){switch(app.se.play("click"),$("#chose-edit-type-c"+n).hide(),n){case 1:app.screen.transition("RegisterCardsByHand"),new RegisterCardsByHand;break;case 2:app.screen.transition("RegisterCardsByWords"),new RegisterCardsByWords;break;case 3:app.screen.transition("ExportCards"),new ExportCards;break;case 4:app.screen.transition("ImportCards"),new ImportCards}return null},app.status.message="\u30e1\u30cb\u30e5\u30fc\u3092\u9078\u629e",app.key.load(t={keys:{h:s,j:r,k:o,l:a}}),e(),$("#chose-edit-type-c"+n).show()}var n;return n=1,e}(),RegisterCardsByWords=function(){function e(){var e,p,u,l,c,i,d,f,g,w,m,y,h,k,v;e=function(){var e,n,a,t;for(app.se.play("ok"),e=r.getAll().slice(0),n=r.getLen()-r.getNum()-1;;){if(0===n)break;e.pop(),n-=1}return t=[],Array.prototype.push.apply(t,e),Array.prototype.push.apply(t,app.cards.getAll()),a=new Strage,a.save(t,function(e){return null!=e&&app.screen.transition("Error"),$("#notification").fadeIn().delay(3e3).fadeOut()})},i=function(e){var n,r,t,s,o,p,u,l,c,i;for(a=JSON.parse(localStorage.getItem("dic"))||[],s=function(e){var n,r,t;for(r=0,t=a.length;t>r;r++)if(n=a[r],e===n)return!0;return null},o=[],"not found"===app.cards&&(app.cards=new Cards),r=app.cards.getAll(),u=0,c=e.length;c>u;u++){for(p=e[u],t=null,l=0,i=r.length;i>l;l++)if(n=r[l],p===n.front||null!=s(p)){t=!0;break}null===t&&o.push(p)}return o},v=function(e){var n,r,a,t,s,o,p,u,l,c;for(n=e.counts,r=p=0,l=n.length;l>p;r=++p)for(o=n[r],a=u=r,c=n.length-1;c>=r?c>=u:u>=c;a=c>=r?++u:--u)n[r]<n[a]&&(s=e.words[r],t=e.counts[r],e.words[r]=e.words[a],e.counts[r]=e.counts[a],e.words[a]=s,e.counts[a]=t);return e.words},c=function(){var e,n,r,a,t,s,o;s=[],e=[],t=[],r={},a=function(e){return("-"===e[0]||"'"===e[0])&&(e=e.slice(1,e.length)),("-"===e[e.length-1]||"'"===e[e.length-1])&&(e=e.slice(0,e.length-1)),e},$("#register-cards-by-words-input").val().replace("\u2019","'").replace(".","").split(/[^a-zA-Z'-]/).forEach(function(e){return e=a(e.toLowerCase()),""!==e&&(t[e]=null!=t[e]?t[e]+1:1),null});for(n in t)s.push(n),e.push(t[n]);return r.words=s,r.counts=e,o=i(v(r))},d=function(){var e;return e={num:r.getNum()+1,len:r.getLen()}},u=function(){return app.status.message="\u672d\u3092\u4f5c\u6210\u4e2d",setTimeout(function(){return null!==window.ontouchstart?$("#register-cards-by-words-back").focus():void 0},0),o.status=d(),n=r.getCurrent(),n.link=""+app.settings.link+n.front,o.card=n,new Speech(n.front),null},y=function(){return app.se.play("click"),r.prev(),u()},g=function(){return void 0===r.getNext()?(k(),null):(app.se.play("click"),r.next(),u())},p=function(){return app.se.play("blow"),a.push(n.front),r["delete"](),0===r.getLen()?(app.se.play("click"),app.screen.transition("home"),localStorage.setItem("dic",JSON.stringify(a)),new Home,null):(u(),null)},k=function(){var e,n;for(app.status.message="\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059",app.se.play("click"),app.screen.transition("Saving"),localStorage.setItem("dic",JSON.stringify(a)),clearInterval(s),e=r.getAll().slice(0),n=r.getLen()-r.getNum()-1;;){if(0===n)break;e.pop(),n-=1}return app.cards.add(e),new Saving,null},m=function(){var n,a,t,o,l,i;if(app.se.play("click"),app.screen.transition("Regi"),o=c(),0===o.length)return app.screen.transition("RegisterCardsByWordsNotfound"),app.key.load(a={keys:{h:f}}),null;for(r=new Cards,r.create(),l=0,i=o.length;i>l;l++)t=o[l],n={front:t},r.setCurrent(n),o.length-1>r.getNum()&&(r.create(),r.next());return r.first(),app.key.load(a={keys:{h:y,l:g,w:k,d_d:p},input:["#register-cards-by-words-back"]}),u(),s=setInterval(function(){return e()},app.settings.interval),app.screen.transition("RegisterCardsByWordsInput"),null},f=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},h=function(){var e;return app.status.message="\u6587\u7ae0\u304c\u3089\u672d\u3092\u4f5c\u6210",setTimeout(function(){return null!==window.ontouchstart?$("#register-cards-by-words-input").focus():void 0},0),null==o?(e={el:"#register-cards-by-words-create",data:{card:n,status:t}},o=new Vue(e)):void 0},app.status.message="\u672d\u3092\u4f5c\u6210\u4e2d",app.key.load(w={keys:{h:f,l:m},input:["#register-cards-by-words-input"]}),l=$("#register-cards-by-words-input"),l.val(""),h()}var n,r,a,t,s,o;return r=null,o=null,n=null,t=null,s=null,a=null,e}(),RegisterCardsByHand=function(){function e(){var e,n,t,s,o,p,u,l;s=function(){var e;return e={num:app.cards.getNum()+1,len:app.cards.getLen()}},t=function(){return setTimeout(function(){return null!==window.ontouchstart?$("#add-cards-manually-front").focus():void 0},0),a.status=s(),a.card=app.cards.getCurrent(),null},p=function(){return app.se.play("click"),app.cards.prev(),t()},o=function(){return app.se.play("click"),void 0===app.cards.getNext()&&app.cards.create(),app.cards.next(),t()},n=function(){return app.se.play("blow"),app.cards["delete"](),0===app.cards.getLen()&&app.cards.create(),t(),null},l=function(){var e,n;return clearInterval(r),app.se.play("click"),app.screen.transition("Saving"),app.cards=app.cards,e=app.cards.getAll(),n=new Strage,n.save(e,function(e){var n,r;return null!=e?(app.screen.transition("Error"),r={el:"#error",data:{message:res}},a=new Vue(r),null):(app.se.play("ok"),app.screen.transition("Done"),n=app.cards.getLen(),new Done(n),null)}),null},e=function(){var e,n;return e=app.cards.getAll(),n=new Strage,n.save(e,function(e){return null!=e&&app.screen.transition("Error"),$("#notification").fadeIn().delay(3e3).fadeOut()})},u=function(){var t,s;return r=setInterval(function(){return app.se.play("ok"),e()},app.settings.interval),"not found"===app.cards?(app.cards=new Cards,app.cards.create()):app.cards.last(),s={el:"#RegisterCardsByHand",data:{card:{front:"",back:""},status:{len:0,num:0}}},null==a&&(a=new Vue(s)),app.key.load(t={keys:{h:p,l:o,w:l,d_d:n},input:["#add-cards-manually-front","#add-cards-manually-back"]}),null},app.status.message="\u7de8\u96c6\u4e2d",u(),t()}var n,r,a;return n=null,a=null,r=null,e}(),ImportCards=function(){function e(){var e,t,s,o;s=function(){var a,t,s;return t=function(r){var a;return r.name.match(/\.huda$/)?(a=new FileReader,a.readAsText(r),a.onload=function(r){var t,s;try{return t=JSON.parse(a.result),"not found"===app.cards&&(app.cards=new Cards),app.cards.create(t),app.screen.transition("ImportFinished"),app.se.play("right"),app.status.message="\u30a4\u30f3\u30dd\u30fc\u30c8\u5b8c\u4e86",app.key.load(s={keys:{l:e}})}catch(o){return r=o,app.status.message="\u30a8\u30e9\u30fc",app.se.play("wrong"),app.screen.transition("ImportError"),n.message="\u672d\u30d5\u30a1\u30a4\u30eb\u304c\u7834\u640d\u3057\u3066\u3044\u307e\u3059\u3002"}}):(app.status.message="\u30a8\u30e9\u30fc",app.se.play("wrong"),app.screen.transition("ImportError"),n.message="\u672d\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),null},a=function(e){return t(e.target.files[0]),null},s=function(){var e;return app.se.play("click"),e=document.querySelector("#cards-import-upload"),e.value="",null===r&&(e.addEventListener("change",a,!0),r=!0),e.click(),e.removeEventListener("click",this),null},$("#cards-import-drop").off("dragover").on("dragover",function(e){return e.preventDefault(),null}).off("drop").on("drop",function(e){return e.preventDefault(),t(e.originalEvent.dataTransfer.files[0]),null}).off("touchstart").on("touchstart",function(){return s(),null}).off("mousedown").on("mousedown",function(){return null!==window.ontouchstart&&s(),null}),null},e=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},null==a&&(o={el:"#cards-import-error",data:{cards:n}},new Vue(o)),app.status.message="\u30a4\u30f3\u30dd\u30fc\u30c8",s(),app.key.load(t={keys:{h:e}})}var n,r,a;return a=null,n={},r=null,e}(),ExportCards=function(){function e(){var e,a,t,s;e=function(){var e,r,a;return"not found"!==app.cards?(e=JSON.stringify(app.cards.getAll()),r=new Blob([e],{type:"application/x-huda"}),window.URL=window.URL||window.webkitURL,a=window.URL.createObjectURL(r),n.filename=""+app.tagname+".huda",n.href=a,n.download=""+app.tagname+".huda",setTimeout(function(){var e;return e=document.querySelector("#cards-backup-export-link"),e.click()},100),null):void 0},a=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},null==r&&(s={el:"#cards-export",data:{cards:n}},new Vue(s)),e(),app.status.message="\u30a8\u30af\u30b9\u30dd\u30fc\u30c8",app.key.load(t={keys:{h:a}})}var n,r;return r=null,n={},e}(),Saving=function(){function e(){var e;app.key.reset(),e=new Strage,e.save(app.cards.getAll(),function(e){return null!=e?(app.se.play("wrong"),null):(setTimeout(function(){return app.se.play("ok"),app.screen.transition("Done")},500),new Done)})}return e}(),Done=function(){function e(){var e,n,r,a;n=function(){return app.se.play("click"),app.screen.transition("home"),new Home},e={num:app.cards.getLen(),strage:app.strage},a={el:"#done",data:{cards:e}},new Vue(a),app.key.load(r={keys:{l:n}}),app.status.message="\u4fdd\u5b58\u3057\u307e\u3057\u305f"}return e}(),TestCards=function(){function e(){var e,n,r,a,t;app.q_limit=10,app.q_num=0,a=function(){return["0","1d","1w","4w","999w"]},r=function(e){var n,r,t;return n=1e3,t=a(),0>e&&(e=0),e>t.length-1&&(e=t.length-1),t[e].match(/m|h|d|w/g)&&(n*=60),t[e].match(/h|d|w/g)&&(n*=60),t[e].match(/d|w/g)&&(n*=24),t[e].match(/w/g)&&(n*=7),r=parseInt(t[e].replace(/[^\d]/g,"")),r*n},n=function(e,n){var r,a,t,s,o,p,u,l,c,i;p=null,s=0,o=[];for(u in e)s+=1,"cards"!==u&&(p=u);if(void 0===e.cards)return null;for(i=e.cards,t=l=0,c=i.length;c>l;t=++l){if(r=i[t],2===s&&r[p]===e[p])return t;null!=n&&(a=n(r),o.push(null!==a?a:null))}return 0===o.length?null:o},t=function(){return app.se.play("click"),app.screen.transition("home"),new Home,null},e=function(){var e,a,s;if(e=function(e){var n,a,t;return t=e.score,n=e.date,a=r(t),+new Date-n>a?e:null},"not found"===app.cards)return app.screen.transition("TestNotfound"),app.key.load(s={keys:{h:t}}),null;for(app.mirror_cards=new Cards,a=n({cards:app.cards.getAll()},e),app.mirror_cards.create(a);;){if(null!=app.mirror_cards.getCurrent())return app.screen.transition("TestQuestion"),new TestQuestion,null;if(void 0===app.mirror_cards.getNext())return app.screen.transition("TestLearned"),app.key.load(s={keys:{h:t}}),null;app.cards.next(),app.mirror_cards.next()}return null},e(),app.right=0,app.wrong=0,app.forgot=0}return e}(),TestQuestion=function(){function e(){var n,a,t,s,o;app.status.message="\u30aa\u30e2\u30c6",app.date=+new Date,app.q_num+=1,t=function(){return app.se.play("click"),app.screen.transition("TestAnswer"),new TestAnswer,null},a=function(){var n,r;for(app.se.play("blow"),app.forgot+=1,n=app.mirror_cards.getCurrent(),r=+new Date-app.date,n.period=r,app.cards.setCurrent(n),app.period+=r;;){if(void 0===app.mirror_cards.getNext()||app.q_num===app.q_limit){app.screen.transition("TestResult"),new TestResult;break}if(app.cards.next(),app.mirror_cards.next(),null!=app.mirror_cards.getCurrent()){new e;break}}return null},n=app.cards.getCurrent(),n.front_chars=n.front.split("").toString().replace(/,/g,", ... "),new Speech(n.front),null!=r?r.card=n:(o={el:"#test-question",data:{card:n}},r=new Vue(o)),app.key.load(s={keys:{h:a,l:t}})}var n,r;return r=null,n=null,e}(),TestAnswer=function(){function e(){var e,t,p,u,l,c,i,d,f,g,w,m,y;y=0,u=function(){var e;return e=[],e.push(0===Math.floor(2*Math.random())?"A":"B"),e.push("A"===e[0]?"B":"A"),e},l=function(){var e,n,r,a;if(e=app.cards.getLen(),r=function(){return Math.floor(Math.random()*e)},1===app.cards.getLen())return"\u30a6\u30e9\u304c\u3042\u308a\u307e\u305b\u3093";for(n=r();n===app.cards.getNum();)n=r();return a=app.cards.getCard(n),a.back},i=function(){var e,n;for(app.se.play("click"),app.screen.transition("TestQuestion"),$("#test-answer-ab").fadeIn(),$("#test-answer-next").hide(),e=app.cards.getCurrent(),n=+new Date-app.date,e.period+=n,app.period+=n,e.date=+new Date,e.score+=y,e.score<0&&(e.score=0),app.cards.setCurrent(e),$("#test-answer-back-A-good").hide(),$("#test-answer-back-B-good").hide();;){if(void 0===app.mirror_cards.getNext()||app.q_num===app.q_limit){app.screen.transition("TestResult"),new TestResult;break}if(app.cards.next(),app.mirror_cards.next(),null!=app.mirror_cards.getCurrent()){new TestQuestion;break}}return null},g=function(e){return"right"===e&&(app.status.message="\u6b63\u89e3"),"wrong"===e?app.status.message="\u6b8b\u5ff5":void 0},t=function(){return e("A"),null},p=function(){return e("B"),null},e=function(e){var t;return $("#test-answer-ab").hide(),$("#test-answer-next").fadeIn(),n[0]===e?("A"===n[0]?r.style="background-color: #4A1; color: #FFF;":a.style="background-color: #4A1; color: #FFF;",app.se.play("right"),app.right+=1,g("right"),y=1):("A"===n[0]?a.style="background-color: #E66; color: #FFF":r.style="background-color: #E66; color: #FFF",app.se.play("wrong"),g("wrong"),app.wrong+=1,y=0),$("#test-answer-back-"+n[0]+"-good").show(),app.key.load(t={keys:{l:i}}),null},n=u(),m=l(),f=app.cards.getCurrent().back,"A"===n[0]?(r={back:f},a={back:m}):(r={back:m},a={back:f}),null!=o?(g(),o.cardA=r,o.cardB=a):($("#test-answer-ab").fadeIn(),$("#test-answer-next").hide(),c={text:"\u30a6\u30e9\u3092\u9078\u629e\u3057\u3066\u4e0b\u3055\u3044"},w={el:"#test-answer",data:{cardA:r,cardB:a,message:c,ab:n,next:s}},o=new Vue(w)),app.key.load(d={keys:{j:p,k:t}}),app.status.message="\u30a6\u30e9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"}var n,r,a,t,s,o;return o=null,n=null,r=null,a=null,t=null,s=null,e}(),TestResult=function(){function e(){var e,r,a,t,s,o;r=function(){return app.se.play("click"),app.screen.transition("Saving"),new Saving},e=function(e){var n,r,a,t,s;return n=e/1e3,s=Math.round(n%60),a=Math.floor(n/60%60),r=Math.floor(n/3600%60),t="",r>0&&(t+=""+r+"\u6642\u9593"),a>0&&(t+=""+a+"\u5206"),t+=""+s+"\u79d2"},t=e(app.period),s={period:t,right:app.right,wrong:app.wrong,forgot:app.forgot},null!=n?n.result=s:(o={el:"#test-result",data:{result:s}},n=new Vue(o)),app.status.message="\u30c6\u30b9\u30c8\u7d42\u4e86",app.key.load(a={keys:{l:r}})}var n;return n=null,e}();